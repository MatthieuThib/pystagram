on:
  workflow_call:

jobs:
  build:
    name: "Build Docker Image ðŸ³"
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout Repository ðŸ”„"
        uses: actions/checkout@v4
      -   name: "Fetch git tag ðŸ·ï¸"
          run: |
            GIT_TAG=$GITHUB_REF_NAME
            echo "GIT_TAG=$GIT_TAG" >> $GITHUB_ENV
      - name: "Build image ðŸ› "
        run: |
          docker build --tag ${{ github.event.repository.name }}:"$GIT_TAG" .
      - name: "Save image ðŸ’¾"
        run: docker save --output "${{ github.event.repository.name }}.tar" ${{ github.event.repository.name }}:"$GIT_TAG"
      - name: "Upload image ðŸ“¤"
        uses: actions/upload-artifact@v2
        with:
          name: docker-image
          path: "${{ github.event.repository.name }}.tar"
          retention-days: 1
